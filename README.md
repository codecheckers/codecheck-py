# codecheck-py
Python-based template for writing [CODECHECK](https://codecheck.org.uk)
certificates.

Note that this is an **alpha version**, please report any issues in the
[issue tracker](https://github.com/codecheckers/codecheck-py/issues).

## Usage

The files in this repository are meant to be placed into the `codecheck`
directory of a repository that has been forked for a CODECHECK. The codechecker
needs to fill out the jupyter notebook `codecheck.ipynb` which automatically
generates some boilerplate content based on the `codecheck.yml` file and
includes figures and a summary of CSV files regenerated by the codechecker (see
below and comments in `codecheck.py`).

To generate a report from the notebook (which by default hides all the code used
for the automatic content generation), run:
```console
$ jupyter nbconvert --to pdf --no-input --no-prompt --execute --LatexExporter.template_file nbconvert_template.tex.j2 codecheck.ipynb
```

The `environment.yml` file defines a [conda](https://coda.io) environment that
can be used to install all the necessary packages:
```console
$ conda env create -f environment.yml
$ conda activate codecheck-env
```

The (optional) `nbconvert_template.tex.j2` template overrides some of the
default nbconvert settings, in particular by reducing the font size and the
margins a bit, and enabling line breaks in verbatim output (useful e.g. when
including command line output/log files in the report).

This template makes a few assumptions:
* The main directory needs to have a `codecheck.yml` (i.e. `../codecheck.yml`
  from the point of view of the jupyter notebook) file with all the required
  information stated in the
  [configuration file specification](https://codecheck.org.uk/spec/config/1.0/).
* Files referenced in the *manifest* of the configuration file are reproduced
  in an `outputs` subdirectory of `codecheck`. The remaining directory structure
  needs to be reproduced in this directory. For example, if the manifest
  references a file `figures/image.png`, the reproduced image needs to be placed
  into `codecheck/outputs/figures/image.png`.

For an example use of this template in a CODECHECK, see
https://github.com/codecheckers/causality-review/
